<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>Simple Suomi Flashcards</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="styles/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" href="styles/iayos.suomi.css" />
</head>

<body>
	<div data-role="page" id="page-home">
		<div data-role="header">
			<div data-role="header" data-position="fixed">
				<h3>Simple Suomi</h3>
				<a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
				<a href="#add-form" data-icon="gear" data-iconpos="notext">Add</a>
			</div>
		</div>

		<div role="main" class="ui-content jqm-content jqm-fullwidth" <h3 class="ui-bar ui-bar-a ui-corner-all">Simple Suomi Flashcards</h3>
			[blah blah blah, ]show most populor OR logged in user's latest / favs - show resume]
			<h4 class="ui-bar ui-bar-a">Most Popular</h4>
			<ul data-role="listview" data-inset="true">
				<li><a class="select-deck" data-deck-code="deck_top_100_verbs">Top 100 Finnish Words</a></li>
				<li><a class="select-deck" data-deck-code="deck_top_100_words">Top 50 Holiday Phrases</a></li>
				<!--<li><a class="select-deck" >Top 50 Verbs</a></li>
				<li><a class="select-deck" >Opposites Attract</a></li>-->
			</ul>
			<!--<p>Or </p>
			<a href="#page-search-decks">search all decks </a>-->
			<div data-demo-html="#panel-fixed-page1"></div>
		</div>
		<div data-role="footer" data-position="fixed">
			<h4>homepage footer</h4>
		</div>
	</div>

	<div data-role="page" id="page-contact">
		<div data-role="header" data-position="fixed">
			<h1>Contact Simple Suomi</h1>
			- contact form to submit feedback
		</div>
		<div role="main" class="ui-content">...</div>
		div data-role="footer" data-position="fixed">
		<h4>contact footer</h4>
	</div>
	</div>

	<div data-role="page" id="page-deck">
		<div data-role="header" data-position="fixed">
			<h3>Deck: [deck name]]</h3>
			<a href="#page-home" data-icon="home" data-iconpos="notext">Home</a>
			<a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
		</div>
		<div role="main" class="ui-content">
			<div class="ui-body ui-body-a ui-corner-all ">
				<div id="flashcard" class="flip">
					<div class="front">
						<p class="iayos-center">
							<span id="frontText"></span>
						</p>
						<hr/>
					</div>
					<div class="back">
						<p class="iayos-center">
							<span id="backText"></span>
						</p>
						<hr/>
						<p class="iayos-center">
							<input type="button" id="answer1" class="answer-button" value="">
						</p>
						<p class="iayos-center">
							<input type="button" id="answer2" class="answer-button" value="">
						</p>
						<p class="iayos-center">
							<input type="button" id="answer3" class="answer-button" value="">
						</p>
					</div>
				</div>
			</div>
			<input id="toggle-flashcard" type="button" value="FLIP">
			<input type="button" value="READ TO ME">
		</div>
		<div data-role="footer" data-position="fixed">
			<h4>deck footer</h4>
		</div>
	</div>

	<script src="js/jquery-2.1.4/jquery-2.1.4.min.js"></script>
	<script src="js/jquery.flip/jquery.flip.min.js"></script>
	<script src="js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script src="dist/script.js"></script>
	<script>
		$("#flashcard").flip({
			trigger: 'manual'
		});
		$("#toggle-flashcard").click(function () {
			//console.log("clicking answer 1 will give ansewrid: " + $("#answer1").data("answerId"));
			$("#flashcard").flip('toggle');
		});

		$(function () {
			$(document).on('click', '.select-deck', function () {
				//Change page
				// console.log("deck selcetiojn called by " + this.id);

				let selectedDeckCode = $(this).data("deck-code");
				selectDeck(selectedDeckCode);
				$.mobile.changePage("#page-deck");
			});
			$(document).on('click', '.answer-button', function () {
				//Change page
				console.log("answer called by element " + this.id);

				console.log("clicked answer 1 and should se ansewrid: " + $("#answer1").data("answerId"));

				console.log("chose answer: " + $(this).data("answerId"));
				let chosenAnswerId = $(this).data("answerId");
				if (storeObject.correctAnswerId === chosenAnswerId) {
					// correct
					console.log("Answered correctly");
				}
				else {
					// incorrect
					console.log("Answered incorrectly");
				}

				$.mobile.changePage("#page-deck");
				console.log("answered a question");
			});
		});


		// Store object
		var storeObject = {
			activeDeckId: 0,
			activeDeckCode: "",
			activeQuestionId: 0,
			correctAnswerId: 0,
			activeDeck: {}
		}

		function selectDeck(deckCode) {
			console.log("selected a deck: " + deckCode);
			storeObject.activeDeckCode = deckCode;
			$.getJSON("/data/" + deckCode + ".json", function (json) {
				console.log(json); // this will show the info it in firebug console
				storeObject.activeDeck = json;

				// by default select the first question
				initializeQuestion(1);
			});

			
		}

		function initializeQuestion(questionId) {
			console.log("Initializing question: " + questionId);
			storeObject.activeQuestionId = questionId;

			var activeCard = storeObject.activeDeck.cards[0];
			var wrongCard1 = storeObject.activeDeck.cards[1];
			var wrongCard2 = storeObject.activeDeck.cards[2];
			//storeObject.correctAnswerId = 1;
			// load up the deck, 
			// load up the question
			// load up 1 correct and 2 random answers

console.log(activeCard, wrongCard1, wrongCard2);

			$("#frontText").text(activeCard.f);
			$("#backText").text(activeCard.f);
			//$("#answer1").val("GOOD");
			$("#answer1").attr("value", activeCard.b);
			$("#answer1").data("answerId", 1);
			//$("#answer2").val("BAD");
			$("#answer2").attr("value", wrongCard1.b);
			$("#answer2").data("answerId", 2);
			//$("#answer3").val("UGLY");
			$("#answer3").attr("value", wrongCard2.b);
			$("#answer3").data("answerId", 3);

			console.log("clicking answer 1 will give ansewrid: " + $("#answer1").data("answerId"));
			// console.log($("#frontText").text("HYVA")); // = "test";
		}

// $(".back").hide();
// $(".front").show();
		// var screen = $.mobile.getScreenHeight();

// var header = $(".ui-header").hasClass("ui-header-fixed") ? $(".ui-header").outerHeight()  - 1 : $(".ui-header").outerHeight();

// var footer = $(".ui-footer").hasClass("ui-footer-fixed") ? $(".ui-footer").outerHeight() - 1 : $(".ui-footer").outerHeight();

// /* content div has padding of 1em = 16px (32px top+bottom). This step
//    can be skipped by subtracting 32px from content var directly. */
// var contentCurrent = $(".ui-content").outerHeight() - $(".ui-content").height();

// var content = screen - header - footer - contentCurrent;
// console.log (content)
// $(".ui-content").height(content);
	</script>
</body>

</html>

<!--<div data-role="page" id="page-login">
		<div data-role="header">
			<h1>Create Account or Login</h1>
			blah blah blah
		</div>
		<div role="main" class="ui-content">...</div>
		<div data-role="footer" data-position="fixed">footer</div>
	</div>-->

<!--<div data-role="page" id="page-about">
		<div data-role="header" data-position="fixed">
			<h3>About Simple Suomi</h3>
			<a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
			<a href="#add-form" data-icon="gear" data-iconpos="notext">Add</a>
		</div>
		<div role="main" class="ui-content">
			<h2>About Simple Suomi</h2>
			- donate - who we are - privacy
		</div>
		<div data-role="footer" data-position="fixed">
			<h4>privacy footer</h4>
		</div>
	</div>-->

<!--
		<div data-role="panel" data-position-fixed="true" data-display="push" data-theme="a" id="nav-panel">

			<ul data-role="listview">

				<li data-icon="delete"><a href="#" data-rel="close">Close menu</a></li>

				<li><a href="#panel-fixed-page2">Deck 1</a></li>

				<li><a href="#panel-fixed-page2">Deck 2</a></li>

				<li><a href="#panel-fixed-page2">Deck 3</a></li>

				<li><a href="#panel-fixed-page2">Text inputs & textarea</a></li>

				<li><a href="#panel-fixed-page2">Transitions</a></li>
			</ul>
		</div>
		-->
<!-- /panel -->
<!--
		<div data-role="panel" data-position="right" data-position-fixed="true" data-display="overlay" data-theme="a" id="add-form">

			<form class="userform">

				<h2>Login</h2>
				<label for="name">Username:</label>
				<input type="text" name="name" id="name" value="" data-clear-btn="true" data-mini="true">
				<label for="password">Password:</label>
				<input type="password" name="password" id="password" value="" data-clear-btn="true" autocomplete="off" data-mini="true">
				<div class="ui-grid-a">

					<div class="ui-block-a"><a href="#" data-rel="close" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-mini">Cancel</a></div>

					<div class="ui-block-b"><a href="#" data-rel="close" class="ui-btn ui-shadow ui-corner-all ui-btn-a ui-mini">Save</a></div>
				</div>
			</form>
		</div>


		<div data-role="page" id="page-search-decks">
		<div data-role="header" data-position="fixed"></div>
		<div data-role="main" class="ui-content">
			<form>
				<input data-type="search" id="searchForCollapsibleSetChildren">
			</form>

			<div data-role="collapsibleset" data-filter="true" data-children="> div, > div div ul li" data-inset="true" id="collapsiblesetForFilterChildren"
			 data-input="#searchForCollapsibleSetChildren">

				<div data-role="collapsible" data-filtertext="Animals Cats Dogs Lizards snakes">

					<h3>Animals</h3>

					<ul data-role="listview" data-inset="false">

						<li data-filtertext="Animals Cats">Cats</li>

						<li data-filtertext="Animals Dogs">Dogs</li>

						<li data-filtertext="Animals Lizards">Lizards</li>

						<li data-filtertext="Animals Snakes">Snakes</li>
					</ul>
				</div>

				<div data-role="collapsible" data-filtertext="Cars Acura Audi BMW Cadillac">

					<h3>Cars</h3>

					<ul data-role="listview" data-inset="false">

						<li data-filtertext="Cars Acura">Acura</li>

						<li data-filtertext="Cars Audi">Audi</li>

						<li data-filtertext="Cars BMW">BMW</li>

						<li data-filtertext="Cars Cadillac">Cadillac</li>
					</ul>
				</div>

				<div data-role="collapsible" data-filtertext="Planets Earth Jupiter Mars Mercury">

					<h3>Planets</h3>

					<ul data-role="listview" data-inset="false">

						<li data-filtertext="Planets Acura">Earth</li>

						<li data-filtertext="Planets Jupiter">Jupiter</li>

						<li data-filtertext="Planets Mars">Mars</li>

						<li data-filtertext="Planets Mercury">Mercury</li>
					</ul>
				</div>
			</div>

		</div>
		<div data-role="footer" data-position="fixed"></div>
	</div>

		-->